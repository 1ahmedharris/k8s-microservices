server {
    listen 80;
    server_name site.com;
    root /var/www/html;
    index index.html;
    
    location / {
        # client-side routing
        try_files $uri $uri/ /index.html;
    }

    # LOCATION BLOCK 
    # Handles ingress requests.
    location / {
        # client-side routing
        try_files $uri $uri/ /index.html;

        # Security headers for CDN (e.g., CloudFront)
        add_header X-Content-Type-Options "nosniff" always;
        add_header X-Frame-Options "DENY" always;
        add_header Referrer-Policy "strict-origin-when-cross-origin" always;
        add_header Permissions-Policy "geolocation=(), microphone=(), camera=(), payment=(), midi=(), usb=(), gamepad=(), gyroscope=(), accelerometer=(), magnetometer=(), display-capture=()" always;
    }

    # --- PERFORMANCE: BROWSER CACHING (and CloudFront Origin Caching) ---
    # This location block applies aggressive caching headers to static assets.
    # Uncomment and customize if you want caching for static files like CSS, JS, images, fonts, etc.
    #location ~* \.(css|js|ico|png|jpg|jpeg|gif|svg|woff|woff2|ttf|eot)$ {
    #    # Tells browsers and proxies (like CloudFront) to cache these assets for one year.
    #    # CloudFront should be configured to "Use Origin Cache Headers" for these paths.
    #    expires 3M always;
    #    add_header Cache-Control "public, immutable" always;
    #}
}

